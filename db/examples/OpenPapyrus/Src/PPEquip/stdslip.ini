// STDSLIP.FMT
// Copyright (c) Petroglif 2007
// Codepage - Windows-1251
// ModifDate=02/09/2007
// Стандартный файл, описания кассовых отчетов
// 
// Справка по псевдопеременным, используемым в языке описания //
//
// Символ	Контекст	Описание
// @CURDATE         Любой   Текущая дата
// @CURTIME         Любой   Текущее время
// @MAINORG         Любой   Наименование главной организации
// @DATE            Кассовый чек, документ, кассовая сессия
//                  Дата документа (чека, сессии)
// @TIME            Кассовый чек, кассовая сессия
//                  Время кассового чека или сессии
// @BILLNO          Кассовый чек, документ, кассовая сессия
//                  Номер документа (чека, сессии)
// @CLIENT          Документ
//                  Наименование контрагента по документу
// @AGENT           Кассовый чек, документ
//                  Наименование агента по документу либо кассовому чеку
// @CASHIER         Кассовый чек
//                  Имя кассира, пробившего чек
// @TABLE           Кассовый чек
//                  Номер стола, к которому привязан кассовый чек
// @AMOUNT          Кассовый чек, документ, кассовая сессия
//                  Номинальная сумма документа или чека. Для кассовой сессии - 
//                  сумма выручки по чекам за минусом возвратов (включая и наличный
//                  и безналичный расчет). Эта сумма учитывает все скидки, 
//                  предоставленные покупателю.
// @DISCOUNT        Кассовый чек, документ, кассовая сессия
//                  Сумма скидка по документу или чеку. Для кассовой сессии - 
//                  общая сумма скидки по всем чекам.
// @AMOUNTWODIS     Кассовый чек, документ, кассовая сессия
//                  Сумма документа (чека, сессии) без учета скидок 
//                  (в предположении, что по документам или чекам скидки не 
//                  предоставлялись). Величины @AMOUNT, @DISCOUNT и @AMOUNTWODIS 
//                  связаны выражением: @AMOUNT = @AMOUNTWODIS - @DISCOUNT
// @SCARD           Кассовый чек, документ
//                  Номер дисконтной карты, привязанной к чеку (документу).
// @SCARDOWNER      Кассовый чек, документ
//                  Имя владельца дисконтной карты, привязанной к чеку или документу.
// @PCTDIS          Кассовый чек, документ
//                  Величина скидки в процентах к величине @AMOUNTWODIS.
// @WROFFAMOUNT     Кассовая сессия
//                  Сумма списания кассовой сессии
// @DEFICIT         Кассовая сессия
//                  Сумма дефицита по кассовой сессии
// @GOODS           Кассовый чек, документ.
//                  Только для зоны .detail
//                  Наименование товара, соответствующего строке чека или документа.
// @QTTY            Кассовый чек, документ
//                  Только для зоны .detail
//                  Количество товара, соответствующего строке чека либо 
//                  документа. Величина этой переменной всегда больше или равна нулю.
// @PRICE           Кассовый чек, документ
//                  Только для зоны .detail
//                  Цена единицы товара, соотвествующая строке чека или 
//                  документа. Эта величина учитывает все скидки, 
//                  предоставленные покупателю.
// @PRICEWODIS      Кассовый чек, документ
//                  Только для зоны .detail
//                  Цена единицы товара, соотвествующая строке чека или 
//                  документа без учета скидок.
// @ITEMDIS         Кассовый чек, документ
//                  Только для зоны .detail
//                  Скидка по строке чека (документа).
//                  Величины @PRICE, @PRICEWODIS и @ITEMDIS связаны соотношением:
//                  @PRICE = @PRICEWODIS - @ITEMDIS
// @ITEMAMT         Кассовый чек, документ
//                  Только для зоны .detail
//                  Сумма по строке документа или чека с учетом всех скидок.
//                  Должно выполняться равенство:
//                  @ITEMAMT = @PRICE * @QTTY
// @ITEMAMTWODIS    Кассовый чек, документ
//                  Только для зоны .detail
//                  Сумма по строке документа или чека без учета скидок.
//                  Должно выполняться равенство:
//                  @ITEMAMTWODIS = @PRICEWODIS * @QTTY
// @MEMO            Документ
//                  Текст примечания к документу
// @POS             Кассовый чек, кассовая сессия
//                  Номер кассового аппарата, которому соотвествует чек или 
//                  кассовая сессия. Если POS-отчет печатается по суперсессии, 
//                  объединяющей несколько внутренних сессий и, при этом, сама 
//                  суперсессия не привязана к конкретному кассовому аппарату, 
//                  тогда это поле - пустое.
// @POSNODE         Кассовый чек, кассовая сессия
//                  Наименование кассового узла, которому соотвествует кассовый
//                  чек или сессия.
// @DIVISION        Кассовый чек
//                  Номер отдела, к которому относится товар
// @CHECKCOUNT      Кассовая сессия
//                  Кол-во чеков продаж
// @RETCHECKCOUNT   Кассовая сессия
//                  Кол-во чеков возврата
//
slip CCheck {
	title=""
	pagewidth=30
	paper=regular
.header
	space="="
.detail
	"@goods"
	"" fiscal
.footer
	if(@discount > 0)
		space="-"
		"СУММА БЕЗ СКИДКИ =@amountwodis"
		if(@scard <> "")
			"КАРТА @scard"
		endif
		if(@scardowner <> "")
			"ВЛАДЕЛЕЦ @scardowner"
		endif
		"СКИДКА @pctdis% =@discount"
	else
		if(@scard <> "")
			space="-"
			"КАРТА @scard"
			if(@scardowner <> "")
				"ВЛАДЕЛЕЦ @scardowner"
			endif
		endif
	endif
	space="="
}

slip CCheckCopy {
	title="КОПИЯ ЧЕКА"
	pagewidth=36
	paper=regular
.header
	"ПРОДАЖА"
	space="="
.detail
	"@goods"
	if(@qtty != 1)
		"@qtty X @price" right
	endif
	"=@itemamt" right
.footer
	if(@discount > 0)
		space="-"
		"СУММА БЕЗ СКИДКИ =@amountwodis"
		if(@scard <> "")
			"КАРТА @scard"
		endif
		if(@scardowner <> "")
			"ВЛАДЕЛЕЦ @scardowner"
		endif
		"СКИДКА @pctdis% =@discount"
	else
		if(@scard <> "")
			space="-"
			"КАРТА @scard"
			if(@scardowner <> "")
				"ВЛАДЕЛЕЦ @scardowner"
			endif
		endif
	endif
	space="="
	"ИТОГ =@amount" font=2
}

slip CCheckRetCopy {
	title="КОПИЯ ЧЕКА"
	pagewidth=36
	paper=regular
.header
	"ВОЗВРАТ ПРОДАЖИ"
	space="="
.detail
	"@goods"
	if(@qtty != 1)
		"@qtty X @price" right
	endif
	"=@itemamt" right
.footer
	if(@discount > 0)
		space="-"
		"СУММА БЕЗ СКИДКИ =@amountwodis"
		if(@scard <> "")
			"КАРТА @scard"
		endif
		if(@scardowner <> "")
			"ВЛАДЕЛЕЦ @scardowner"
		endif
		"СКИДКА @pctdis% =@discount"
	else
		if(@scard <> "")
			space="-"
			"КАРТА @scard"
			if(@scardowner <> "")
				"ВЛАДЕЛЕЦ @scardowner"
			endif
		endif
	endif
	space="="
	"ИТОГ =@amount" font=2
}

slip ZReportCopy {
	title="КОПИЯ Z-отчета"
	pagewidth=36
	paper=regular
.header
	space="="
	"@date @time"
	"КАССА @posnode"
	"СУТОЧНЫЙ ОТЧЕТ С ГАШЕНИЕМ №@billno"
.detail
	space="-"
	"ВЫРУЧКА =@amount"
	"СУММА СКИДОК =@discount"
.footer
	"=@amount" font=2
	space="="
}

slip SlipDocument {
	title=""
	pagewidth=48
	pagelength=63
	headlines=3
	paper=slip
.header
	"КОПИЯ ЧЕКА № @billno @date @time"
	if(@table != 0)
		if(@agent != "")
			"СТОЛ @table ОБСЛУЖИВАНИЕ: @agent"
		else
			"СТОЛ @table"
		endif
	else
		if(@agent != "")
			"ОБСЛУЖИВАНИЕ: @agent"
		else
			""
		endif
	endif
	space="="
.detail
	"@goods" font=2 wrap=24
	if(@qtty != 1)
		"@qtty X @price =@itemamt" right
	else
		"=@itemamt" right
	endif
.footer
	if(@discount > 0)
		space="-"
		"СУММА БЕЗ СКИДКИ =@amountwodis"
		if(@scard <> "")
			"КАРТА @scard"
		endif
		if(@scardowner <> "")
			"ВЛАДЕЛЕЦ @scardowner"
		endif
		"СКИДКА @pctdis% =@discount"
	else
		if(@scard <> "")
			space="-"
			"КАРТА @scard"
			if(@scardowner <> "")
				"ВЛАДЕЛЕЦ @scardowner"
			endif
		endif
	endif
	space="="
	"ИТОГО  =@amount"
}

